(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{153:function(e){e.exports=JSON.parse('{"a":"https://voipback.herokuapp.com/"}')},156:function(e,t,a){e.exports=a(312)},187:function(e,t){},189:function(e,t){},224:function(e,t){},225:function(e,t){},293:function(e,t){},312:function(e,t,a){"use strict";a.r(t);a(157),a(158),a(159);var n=a(0),l=a.n(n),s=a(34),o=a.n(s),r=a(31),i=a(5),c=a(13),u=a(14),m=a(16),d=a(15),h=a(17),p=a(32),g=a(1),f=a(6),b=a.n(f),y=a(84),v=a.n(y),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).logout=function(){b.a.get("/api/user/logout").then((function(e){a.props.logOut(),a.props.history.replace("/signin")})).catch((function(e){console.log(e)}))},a.toggleCollapse=function(){a.setState({isOpen:!a.state.isOpen})},a.state={isOpen:!1},a.logout=a.logout.bind(Object(i.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e;return e=this.props.isLogin?l.a.createElement(g.v,{right:!0},l.a.createElement(g.r,null,l.a.createElement(g.s,{to:"user"},"Profile")),l.a.createElement(g.r,null,l.a.createElement(g.s,{onClick:this.logout,to:"#"},"Logout"))):l.a.createElement(g.v,{right:!0},l.a.createElement(g.r,null,l.a.createElement(g.s,{to:"signin"},"Sign In")),l.a.createElement(g.r,null,l.a.createElement(g.s,{to:"signup"},"Sign up"))),l.a.createElement(g.t,{color:"primary-color",dark:!0,expand:"md"},l.a.createElement("div",{className:"container"},l.a.createElement(g.u,null,l.a.createElement("strong",{className:"white-text"},l.a.createElement("img",{style:{maxWidth:"50px"},src:v.a,alt:v.a})," E2Ecalls")),l.a.createElement(g.w,{onClick:this.toggleCollapse}),l.a.createElement(g.i,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},l.a.createElement(g.v,{left:!0},l.a.createElement(g.r,null,l.a.createElement(g.s,{to:""},"Home")),l.a.createElement(g.r,null,l.a.createElement(g.s,{to:"/groupchat"},"Group Chat")),l.a.createElement(g.r,null,l.a.createElement(g.s,{to:"/test"},"API"))),e)))}}]),t}(n.Component),k=a(56),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e)))._token="",a.state={email:"",password:"",message:{},isLoading:!1},a.onSubmit=function(e){a.setState({isLoading:!0});var t={email:a.state.email,password:a.state.password,_csrf:a._token,message:{}};b()({method:"post",url:"/api/user/signin",data:t}).then((function(e){a.props.logIn(),a.props.history.replace("/user")})).catch((function(e){a.setState({isLoading:!1,message:e.response.data})}))},a.onChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.onSubmit=a.onSubmit.bind(Object(i.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;b.a.get("/api/user/signin").then((function(t){e._token=t.data._token})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e,t={};if(0!==Object.keys(this.state.message).length){var a=Object.keys(this.state.message)[0];t={messages:l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"alert alert-"+a},l.a.createElement("strong",null,this.state.message[a])))}}return e=this.state.isLoading?l.a.createElement("div",{className:"spinner-border text-primary",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):l.a.createElement(g.b,{type:"button",gradient:"blue",onClick:this.onSubmit,rounded:!0,className:"btn-block z-depth-1a"},"Sign in"),l.a.createElement(g.j,null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(g.x,{className:"justify-content-center"},l.a.createElement(g.h,{style:{maxWidth:"600px"},md:"12"},l.a.createElement(g.c,null,l.a.createElement(g.d,{className:"mx-4"},l.a.createElement("div",{className:"text-center"},l.a.createElement("h3",{className:"dark-grey-text mb-5"},l.a.createElement("strong",null,"Sign in"))),l.a.createElement("div",{className:"grey-text"},l.a.createElement(g.m,{label:"Your email",icon:"envelope",group:!0,value:this.state.email,name:"email",onChange:this.onChange,type:"email",validate:!0,error:"wrong",success:"right"}),l.a.createElement(g.m,{label:"Your password",icon:"lock",name:"password",value:this.state.password,onChange:this.onChange,group:!0,type:"password",validate:!0})),l.a.createElement("p",{className:"font-small blue-text d-flex justify-content-end pb-3"},"Forgot",l.a.createElement("a",{href:"#!",className:"blue-text ml-1"},"Password?")),t.messages,l.a.createElement("div",{className:"text-center mb-3"},e)),l.a.createElement(g.p,{className:"mx-5 pt-3 mb-1"},l.a.createElement("p",{className:"font-small grey-text d-flex justify-content-end"},"Not a member?",l.a.createElement(r.b,{to:"/signup",className:"blue-text ml-1"},"Sign Up")))))))}}]),t}(n.Component),j=a(45),O=a.n(j),S=a(57),w=a.n(S),N={blobToBase64:function(e,t){var a=new FileReader;a.onload=function(){var e=a.result.split(",")[1];t(e)},a.readAsDataURL(e)},b64toBlob:function(e,t,a){t=t||"",a=a||512;for(var n=atob(e),l=[],s=0;s<n.length;s+=a){for(var o=n.slice(s,s+a),r=new Array(o.length),i=0;i<o.length;i++)r[i]=o.charCodeAt(i);var c=new Uint8Array(r);l.push(c)}return new Blob(l,{type:t})},decryptAES:function(e,t){var a=w.a.createDecipher("aes-256-ctr",t),n=a.update(e,"hex","utf8");return n+=a.final("utf8")},encryptAES:function(e,t){var a=w.a.createCipher("aes-256-ctr",t),n=a.update(e,"utf8","hex");return n+=a.final("hex")},decrypt:function(e,t){var a=new O.a({default_key_size:512});return a.setPrivateKey(t),a.decrypt(e)},encrypt:function(e,t){var a=new O.a({default_key_size:512});return a.setPublicKey(t),a.encrypt(e)},randomString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return w.a.randomBytes(e).toString("hex")}},x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={image:""},a.setRef=function(e){a.webcam=e},a.capture=function(){try{var e=a.webcam.getScreenshot(),t=N.encryptAES(e,"qwerty1234qwerty"),n=N.decryptAES(t,"qwerty1234qwerty");a.setState({image:n})}catch(l){console.log(l)}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.capture,40)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("img",{alt:this.state.image,src:this.state.image}),l.a.createElement("button",{onClick:this.capture},"Capture photo"))}}]),t}(n.Component),P=a(85),R=a.n(P),_=0,L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).setRef=function(e){a.webcam=e},a.onChange=function(e){e.target.value.length>=3?b.a.get("/api/search?name="+e.target.value).then((function(e){a.setState({results:e.data.users})})).catch((function(e){a.setState({results:[{_id:0,email:"",profilePic:"/record.png",name:"No Record Found"}]})})):a.setState({results:[]})},a.toggle=function(){a.setState({modal:!a.state.modal})},a.toggle2=function(){a.setState({modal2:!a.state.modal2})},a.state={user:e.user,results:[],friend:{},videoCall:!1,isLoading:!0,sendVideo:!1,notifications:[],image:"/defaultPic.png",promptForAudio:!1,modal:!1,modal2:!1,modal3:!1,call:{},play:!1,inCall:{}},a.privateKey="",a.publicKey="",a.otherSecret="",a.otherPublicKey="",a.roomValue="",a.secret="",a.url="/ringtone.mp3",a.audio=new Audio(a.url),a.audio.loop=!0,a.sendRequest=a.sendRequest.bind(Object(i.a)(a)),a.call=a.call.bind(Object(i.a)(a)),a.updateUser=a.updateUser.bind(Object(i.a)(a)),a.acceptRequest=a.acceptRequest.bind(Object(i.a)(a)),a.viewprofile=a.viewprofile.bind(Object(i.a)(a)),a.play=a.play.bind(Object(i.a)(a)),a.sendAudio=a.sendAudio.bind(Object(i.a)(a)),a.sendSecret=a.sendSecret.bind(Object(i.a)(a)),a.pause=a.pause.bind(Object(i.a)(a)),a.cutCall=a.cutCall.bind(Object(i.a)(a)),a.cutCallSocket=a.cutCallSocket.bind(Object(i.a)(a)),a.inComeCall=a.inComeCall.bind(Object(i.a)(a)),a.getNotification=a.getNotification.bind(Object(i.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"togglePrompt",value:function(){this.setState({promptForAudio:!this.state.promptForAudio})}},{key:"openPrompt",value:function(){this.setState({promptForAudio:!0})}},{key:"closePrompt",value:function(){this.setState({promptForAudio:!1})}},{key:"sendSecret",value:function(e){var t=this,a=N.encrypt(this.secret,this.otherPublicKey);b()({method:"post",url:"/api/secret",data:{id:e,key:this.publicKey,cypher:a}}).then((function(e){t.test()})).catch((function(e){console.log(e.response)}))}},{key:"play",value:function(){!0===this.state.play&&(this.audio.currentTime=0,this.audio.play())}},{key:"pause",value:function(){!1===this.state.play&&(this.audio.currentTime=0,this.audio.pause())}},{key:"cutCall",value:function(e){var t=this;this.setState({inCall:{},modal3:!1,modal2:!1,play:!1}),clearInterval(_),b.a.get("/api/endcall?id="+e).then((function(e){console.log(e),t.pause()})).catch((function(e){console.log(e.response),t.pause()}))}},{key:"cutCallSocket",value:function(){this.setState({inCall:{},modal3:!1,modal2:!1,play:!1}),clearInterval(_),this.pause()}},{key:"inComeCall",value:function(e){this.otherPublicKey=e.pubKey,this.roomValue=e.room,this.setState({inCall:e.from,modal3:!0,play:!0,videoCall:e.isVideo}),this.play()}},{key:"stopUpdate",value:function(){clearInterval(this.update)}},{key:"componentWillUnmount",value:function(){this.stopUpdate()}},{key:"getNotification",value:function(){var e=this;b.a.get("/api/notification").then((function(t){e.setState({notifications:t.data.user})})).catch((function(e){console.log(e)}))}},{key:"call",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({call:e,modal2:!this.state.modal2,videoCall:t});var a={id:e._id,roomValue:this.roomValue,key:this.publicKey,isVideo:t};b()({method:"post",url:"/api/call",data:a}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}))}},{key:"viewprofile",value:function(e){var t=this;b.a.get("/api/viewprofile?id="+e).then((function(e){t.setState({friend:e.data}),console.log(t.state.friend),t.toggle()})).catch((function(e){console.log(e)}))}},{key:"updateUser",value:function(){var e=this;b.a.get("/api/isonline").then((function(t){var a=e.state.user;a.friends=t.data.user.friends,e.setState({user:a})})).catch((function(e){console.log(e)}))}},{key:"sendRequest",value:function(e){var t=this;b.a.get("/api/sendRequest?id="+e).then((function(e){var a=t.state.friend;a.canSendReq=!1,t.setState({friend:a})})).catch((function(e){console.log(e.response)}))}},{key:"acceptRequest",value:function(e,t,a,n){var l=this,s={_id:n,name:t,profilePic:a};b.a.get("/api/accept?id="+e).then((function(e){l.getNotification();var t=l.state.user;t.friends.push(s),l.setState({user:t})})).catch((function(e){console.log(e.response)}))}},{key:"componentDidMount",value:function(){var e=this;this.getNotification(),this.crypt=new O.a({default_key_size:512}),this.privateKey=this.crypt.getPrivateKey(),this.publicKey=this.crypt.getPublicKey(),this.secret=N.randomString(),this.roomValue=N.randomString(32),this.setState({isLoading:!1}),this.props.socket.on("calling",(function(t){e.inComeCall(t)})),this.props.socket.on("getCypher",(function(t){e.otherPublicKey=t.key,e.otherSecret=N.decrypt(t.cypher,e.privateKey);var a=N.encrypt(e.secret,e.otherPublicKey),n={id:t.id,cypher:a};b()({method:"post",url:"/api/exchange",data:n}).then((function(t){e.openPrompt()})).catch((function(e){console.log(e.response)}))})),this.props.socket.on("cypherShare",(function(t){e.otherSecret=N.decrypt(t.cypher,e.privateKey),e.openPrompt()})),this.props.socket.on("end",(function(t){e.cutCallSocket()}))}},{key:"sendAudio",value:function(){var e=this,t=this.props.socket;this.setState({play:!1}),this.audio.currentTime=0,this.audio.pause(),this.closePrompt();var a=this.roomValue,n=this.otherSecret;if(this.state.videoCall){var l=setInterval((function(){try{var n=N.encryptAES(e.webcam.getScreenshot(),e.otherSecret);t.emit(a,{st:n})}catch(s){console.log(s),clearInterval(l)}}),200);t.on(a,(function(t){try{var a=N.decryptAES(t.st,e.secret);e.setState({image:a})}catch(n){console.log(n)}}))}else navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}).then((function(e){var l=new MediaRecorder(e);l.start(),l.addEventListener("dataavailable",(function(e){N.blobToBase64(e.data,(function(e){var l=N.encryptAES(e,n);t.emit(a,{st:l})}))})),l.addEventListener("stop",(function(e){l.start()})),_=setInterval((function(){l.stop()}),3e3)})).catch((function(e){console.log(e)})),t.on(this.roomValue,(function(t){try{var a=N.decryptAES(t.st,e.secret),n=N.b64toBlob(a),l=URL.createObjectURL(n);console.log(l),new Audio(l).play()}catch(s){console.log(s)}}))}},{key:"render",value:function(){var e,t,a=this,n={width:350,height:350,facingMode:"user"};(console.log(this.roomValue),Object.keys(this.state.friend).length>0)?(t=this.state.friend.isFriend?l.a.createElement(g.b,{color:"success"},"call"):this.state.friend.canSendReq?l.a.createElement(g.b,{onClick:function(){a.sendRequest(a.state.friend.user._id)},color:"secondary"},"Send Request"):l.a.createElement(g.b,{disabled:!0,color:"dark"},"Send Request"),e=l.a.createElement(g.n,{isOpen:this.state.modal,toggle:this.toggle,centered:!0},l.a.createElement(g.q,{toggle:this.toggle},this.state.friend.user.name),l.a.createElement(g.o,null,l.a.createElement(g.f,{className:"justify-content-center img-fluid",src:this.state.friend.user.profilePic,waves:!0})),l.a.createElement(g.p,null,t))):e=l.a.createElement("div",null);var s=[],o=!0,r=!1,i=void 0;try{for(var c,u=function(){var e=c.value;s.push(l.a.createElement(g.d,{key:e._id},l.a.createElement("img",{style:{maxWidth:"50px"},src:e.profilePic,alt:e.profilePic}),e.name,l.a.createElement(g.b,{style:{borderRadius:"50px"},className:"btn-sm float-right",color:"danger",href:"mailto:"+e.email},e.email),l.a.createElement(g.b,{style:{borderRadius:"50px"},className:"btn-sm float-right",color:"primary",onClick:function(){a.viewprofile(e._id)}},"View Profile")))},m=this.state.results[Symbol.iterator]();!(o=(c=m.next()).done);o=!0)u()}catch(L){r=!0,i=L}finally{try{o||null==m.return||m.return()}finally{if(r)throw i}}var d=[],h=!0,p=!1,f=void 0;try{for(var b,y=function(){var e=b.value;d.push(l.a.createElement(g.d,{key:e._id},l.a.createElement("img",{style:{maxWidth:"50px"},src:e.from.profilePic,alt:e.from.profilePic}),e.from.name,l.a.createElement(g.b,{style:{borderRadius:"50px"},className:"btn-sm float-right",color:"primary",onClick:function(){a.acceptRequest(e._id,e.from.name,e.from.profilePic,e.from._id)}},"Accept Request")))},v=this.state.notifications[Symbol.iterator]();!(h=(b=v.next()).done);h=!0)y()}catch(L){p=!0,f=L}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}if(Object.keys(this.state.user).length>0&&!1===this.state.isLoading){var E=[],k=!0,C=!1,j=void 0;try{for(var O,S=function(){var e=O.value;e.isOnline?E.push(l.a.createElement(g.d,{key:e._id},l.a.createElement("img",{style:{maxWidth:"50px"},src:e.profilePic,alt:e.profilePic}),e.name,l.a.createElement("span",{style:{color:"green"}}," online"),l.a.createElement(g.b,{className:"btn-sm float-right",color:"success",onClick:function(){a.call(e,!1)}},"Call"),l.a.createElement(g.b,{className:"btn-sm float-right",color:"success",onClick:function(){a.call(e,!0)}},"Video Call"))):E.push(l.a.createElement(g.d,{key:e._id},l.a.createElement("img",{style:{maxWidth:"50px"},src:e.profilePic,alt:e.profilePic}),e.name,l.a.createElement("span",{style:{color:"red"}}," offline"),l.a.createElement(g.b,{className:"btn-sm float-right",color:"success",onClick:function(){a.call(e,!1)}},"Call"),l.a.createElement(g.b,{className:"btn-sm float-right",color:"success",onClick:function(){a.call(e,!0)}},"Video Call")))},w=this.state.user.friends[Symbol.iterator]();!(k=(O=w.next()).done);k=!0)S()}catch(L){C=!0,j=L}finally{try{k||null==w.return||w.return()}finally{if(C)throw j}}var N,x,P="";if(!0===this.state.videoCall?(console.log("true"),P=l.a.createElement("div",null,l.a.createElement("img",{src:this.state.image,alt:this.state.image}),l.a.createElement(R.a,{audio:!1,height:350,ref:this.setRef,screenshotFormat:"image/jpeg",width:350,videoConstraints:n}))):P=l.a.createElement(g.f,{className:"justify-content-center img-fluid",src:"/defaultPic.png",waves:!0}),Object.keys(this.state.call).length>0){var _=l.a.createElement(g.f,{className:"justify-content-center img-fluid",src:"/defaultPic.png",waves:!0});!0===this.state.videoCall&&(_=l.a.createElement("div",null,l.a.createElement(R.a,{audio:!1,height:350,ref:this.setRef,screenshotFormat:"image/jpeg",width:350,videoConstraints:n}),l.a.createElement("img",{alt:"/defaultPic.png",src:this.state.image}))),N=l.a.createElement(g.j,null,l.a.createElement(g.n,{isOpen:this.state.modal2,toggle:function(){a.cutCall(a.state.call._id)},side:!0,position:"bottom-right"},l.a.createElement(g.a,{className:"slow",type:"flash",infinite:!0},l.a.createElement(g.q,{style:{color:"green"},toggle:this.toggle2},"Calling... ",this.state.call.name)),l.a.createElement(g.o,null,_,l.a.createElement(g.a,{type:"tada",infinite:!0},l.a.createElement(g.b,{size:"block",style:{borderRadius:"5%"},onClick:function(){a.cutCall(a.state.call._id)},color:"danger"},l.a.createElement("i",{className:"fa fa-lg fa-phone-slash"}))))))}return Object.keys(this.state.inCall).length>0&&(x=l.a.createElement(g.j,null,l.a.createElement(g.n,{isOpen:this.state.modal3,toggle:function(){a.setState({modal3:!a.state.modal3}),a.stop()},side:!0,position:"bottom-right"},l.a.createElement(g.a,{className:"slow",type:"flash",infinite:!0},l.a.createElement(g.q,{style:{color:"green"},toggle:this.toggle3},"Incomming Call... ",this.state.inCall.name)),l.a.createElement(g.o,null,P,l.a.createElement(g.a,{type:"tada",infinite:!0},l.a.createElement(g.b,{size:"block",style:{borderRadius:"5%"},onClick:function(){a.cutCall(a.state.inCall._id)},color:"danger"},l.a.createElement("i",{className:"fa fa-lg fa-phone-slash"})))),l.a.createElement(g.p,null,l.a.createElement(g.d,null,l.a.createElement(g.a,{className:"slow",type:"bounce",infinite:!0},l.a.createElement(g.b,{className:"float-left",style:{borderRadius:"30%"},onClick:function(){a.sendSecret(a.state.inCall._id)},color:"success"},l.a.createElement("i",{className:"fa fa-lg fa-phone-volume"}))),l.a.createElement(g.b,{className:"float-right",style:{borderRadius:"30%"},onClick:function(){a.cutCall(a.state.inCall._id)},color:"primary"},l.a.createElement("i",{className:"fa fa-lg fa-microphone-alt-slash"}))))))),l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement(g.g,{className:"text-center"},"Welcome ",this.state.user.name),l.a.createElement(g.x,{className:"justify-content-center"},l.a.createElement(g.h,{md:"12"},l.a.createElement(g.k,{onSubmit:function(e){e.preventDefault()},className:"md-form"},l.a.createElement(g.l,{icon:"search"}),l.a.createElement("input",{onChange:this.onChange,name:"name",className:"form-control form-control-sm ml-3 w-75",type:"text",placeholder:"Find Friend","aria-label":"Search"})),l.a.createElement(g.c,null,s)),l.a.createElement(g.h,{md:"6"},l.a.createElement(g.g,null,"Notifications"),l.a.createElement(g.c,null,d)),l.a.createElement("br",null),l.a.createElement(g.h,{md:"6"},l.a.createElement(g.g,null,"Friends"),l.a.createElement(g.c,null,E))),e,N,x,l.a.createElement(g.j,null,l.a.createElement(g.n,{isOpen:this.state.promptForAudio,toggle:this.togglePrompt},l.a.createElement(g.q,{toggle:this.togglePrompt},"Confirm!"),l.a.createElement(g.o,null,l.a.createElement("p",null,"press Ok To Start Call")),l.a.createElement(g.p,null,l.a.createElement(g.b,{onClick:this.sendAudio,color:"primary"},"Ok")))))}return l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("br",null),l.a.createElement("p",{className:"text-monospace"},"Generating Rsa Keys"),l.a.createElement("div",{className:"spinner-border text-info",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e)))._token="",a.state={name:"",email:"",password:"",confirmPassword:"",message:{},isLoading:!1},a.onSubmit=function(e){a.setState({isLoading:!0});var t={name:a.state.name,email:a.state.email,password:a.state.password,_csrf:a._token};b()({method:"post",url:"/api/user/signup",data:t}).then((function(e){a.setState({message:e.data,isLoading:!1})})).catch((function(e){a.setState({message:e.response.data,isLoading:!1})}))},a.onChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.onSubmit=a.onSubmit.bind(Object(i.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;b.a.get("/api/user/signup").then((function(t){e._token=t.data._token})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e,t={};if(0!==Object.keys(this.state.message).length){var a=Object.keys(this.state.message)[0];t={messages:l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"alert alert-"+a},l.a.createElement("strong",null,this.state.message[a])))}}return e=this.state.isLoading?l.a.createElement("div",{className:"spinner-border text-primary",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):l.a.createElement(g.b,{type:"button",gradient:"blue",rounded:!0,className:"btn-block z-depth-1a",onClick:this.onSubmit},"Register"),l.a.createElement("div",null,l.a.createElement(g.j,null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(g.x,{className:"justify-content-center"},l.a.createElement(g.h,{style:{maxWidth:"600px"},md:"12"},l.a.createElement(g.c,null,l.a.createElement(g.d,null,l.a.createElement("div",{className:"text-center"},l.a.createElement("h3",{className:"dark-grey-text mb-5"},l.a.createElement("strong",null,"Sign up"))),l.a.createElement("form",null,l.a.createElement("div",{className:"grey-text"},l.a.createElement(g.m,{label:"Your name",icon:"user",value:this.state.name,name:"name",onChange:this.onChange,group:!0,type:"text",validate:!0,error:"wrong",success:"right"}),l.a.createElement(g.m,{label:"Your email",icon:"envelope",group:!0,value:this.state.email,name:"email",onChange:this.onChange,type:"email",validate:!0,error:"wrong",success:"right"}),l.a.createElement(g.m,{label:"Your password",icon:"lock",group:!0,value:this.state.password,name:"password",onChange:this.onChange,type:"password",validate:!0}),l.a.createElement(g.m,{label:"Confirm password",icon:"lock",value:this.state.confirmPassword,name:"confirmPassword",onChange:this.onChange,group:!0,type:"password",validate:!0})),t.messages,l.a.createElement("div",{className:"text-center py-4 mt-3"},e))))))))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){a.setState({room:e.target.value})},a.onChangeMess=function(e){a.setState({message:e.target.value})},a.state={room:"No Room Joined",message:""},a.messages=[],a.onChangeMess=a.onChangeMess.bind(Object(i.a)(a)),a.sendMessage=a.sendMessage.bind(Object(i.a)(a)),a.onChange=a.onChange.bind(Object(i.a)(a)),a.join=a.join.bind(Object(i.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"sendMessage",value:function(){this.props.socket.emit(this.state.room,{message:this.state.message,userName:this.props.user.name}),this.setState({message:""})}},{key:"join",value:function(){var e=this;this.props.socket.on(this.state.room,(function(t){e.messages.push(t)})),this.props.socket.emit(this.state.room,{message:"hi i am "+this.props.user.name})}},{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,o=this.messages[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;e.push(l.a.createElement("div",{key:N.randomString(32)},l.a.createElement("h1",null,r.name),l.a.createElement("p",null,r.messages)))}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}return this.props.user?l.a.createElement("div",{className:"container"},l.a.createElement(g.k,{className:"md-form"},l.a.createElement(g.l,{icon:"search"}),l.a.createElement("input",{onChange:this.onChange,className:"form-control form-control-sm ml-3 w-75",type:"text",placeholder:"Type Room name","aria-label":"Search"}),l.a.createElement(g.b,{style:{borderRadius:"50%"},onClick:this.join,color:"primary"},"Join Room")),l.a.createElement(g.h,null,l.a.createElement(g.c,null,l.a.createElement(g.d,null,e),l.a.createElement(g.e,null,l.a.createElement("input",{onChange:this.onChangeMess,className:"form-control form-control-sm ml-3 w-75",type:"text",placeholder:"Message","aria-label":"Search"}),l.a.createElement(g.b,{style:{borderRadius:"5%"},onClick:this.sendMessage,color:"success"},"send Message"))))):l.a.createElement("div",null,"You need to signin")}}]),t}(l.a.Component),K=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement(g.j,null,l.a.createElement(g.c,null,l.a.createElement(g.d,null,l.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},l.a.createElement("iframe",{title:"screen",className:"embed-responsive-item",src:"/presentation.mp4",allowfullscreen:!0})))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isLogin:!1,user:{}},a.logOut=a.logOut.bind(Object(i.a)(a)),a.logIn=a.logIn.bind(Object(i.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/api/user/user").then((function(t){e.setState({user:t.data.user,isLogin:!0})})).catch((function(e){console.log(e.response.data)}))}},{key:"logIn",value:function(){var e=this;b.a.get("/api/user/user").then((function(t){e.setState({user:t.data.user,isLogin:!0})})).catch((function(e){console.log(e)}))}},{key:"logOut",value:function(){this.setState({isLogin:!1,user:{}})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(p.a,{path:"/",component:function(t){return l.a.createElement(E,Object.assign({},t,{logOut:e.logOut,isLogin:e.state.isLogin}))}}),l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"/signin",component:function(t){return l.a.createElement(C,Object.assign({logIn:e.logIn},t))}}),l.a.createElement(p.a,{path:"/signup",component:A}),l.a.createElement(p.a,{path:"/User",component:function(t){return l.a.createElement(L,Object.assign({user:e.state.user,socket:e.props.socket},t))}}),l.a.createElement(p.a,{path:"/test",component:x}),l.a.createElement(p.a,{path:"/groupchat",component:function(t){return l.a.createElement(q,Object.assign({user:e.state.user,socket:e.props.socket},t))}}),l.a.createElement(p.a,{path:"/",component:K})))}}]),t}(n.Component),F=a(152),I=a(153),V=a(154),U=a.n(V),W=a(155),B=a.n(W);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=U()(I.a),D=new B.a(z,{numClients:6});D.usePeerConnection=!0,o.a.render(l.a.createElement(r.a,null,l.a.createElement(F.SocketProvider,{socket:D},l.a.createElement(M,{socket:D}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e,t,a){e.exports=a.p+"static/media/logo.1a21cc66.jpg"}},[[156,1,2]]]);
//# sourceMappingURL=main.292df178.chunk.js.map